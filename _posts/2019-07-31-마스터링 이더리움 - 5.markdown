---
layout:     post
title:      마스터링 이더리움 - 5
author:     bcnote3314
tags: 		blockchain Ethereum MasteringEthereum
subtitle:  블록체인 정복기	
category: Block
---

# 마스터링 이더리움 - 챕터 7(1)

마스터링 이더리움 챕터 7 내용 요약. 실제 문법에 관련된 부분은 7(2)에서 정리.

## 스마트 컨트랙트 (Smart contract)

암호학자 닉 사보가 정의했다. "당사자들이 다른 약속에 따라 수행하는 프로토콜을 포함하여 디지털 형식으로 지정된 일련의 약속"  

이더리움에서의 스마트 컨트랙트는 몇가지 용어로 정의할수 있다.

- 컴퓨터 프로그램 : 스마트 컨트랙트는 단순히 컴퓨터 프로그램이다.
- 불변의(immutable) : 스마트 컨트랙트 코드는 한번 배포되면 변경할 수 없다. 기존의 소프트웨어는 패치하는 형태로 수정을 했지만 스마트 컨트랙트는 새로운 인스턴스를 배포하는 것 외에 방법이 없다. (블록체인 특성)
- 결정론적(deterministic) : 스마트 컨트랙트를 실행한 결과물은 그것을 실행한 모든이에게 동일하다. 실행을 시작한 트랜잭션의 컨텍스트와 실행시점에 이더리움 블록체인의 상태가 동일하다는 전제가 있다.
- EVM 컨텍스트(EVM context) : 스마트 컨트랙트는 매우 제한적인 실행 컨텍스트에서 작동된다.
- 탈중앙화된 월드 컴퓨터(decentralized world computer) : EVM은 모든 이더리움 노드에서 로컬 인스턴스로 실행되지만, 모든 인스턴스는 동일한 초기상태에서 동작하며 동일한 최종 상태를 생성하기 때문에 시스템 전체가 단하나의 단일 '월드 컴퓨터'로 동작한다. (단일 스레드이며 노드가 아무리 많아도 성능 이점이 없다.)

## 스마트 컨트랙트 생명 주기

스마트 컨트랙트를 실행하려면 EVM에서 실행되는 바이트 코드로 컴파일이 필요하다.  
컴파일 후 컨트랙트 생성 트랜잭션을 통하여 이더리움 플랫폼에 배포된다. 
이 트랜잭션은 0x00(컨트랙트 생성 주소)fh wjsthdehlsek.

컨트랙트는 트랜잭션에 의하여 호출된 경우에만 실행이 된다.  
이더리움의 모든 컨트랙트는 EOA에서 호출된 트랜잭션에 의하여 실행되며 자체적으로 백그라운드에서 실행되지는 않는다.

트랜잭션은 모든 실행이 성공적으로 종료된 경우에만 모든 변경사항이 기록된다. 그외에는 그전상태로 롤백되며 가스로 소비된 이더는 차감되지만 컨트랙트나 계좌 상태에는 영향을 미치지 않는다.

스마트 컨트랙트 코드는 변경이 불가능하지만 컨트랙트 삭제를 통하여 코드와 내부 상태를 제거하고 빈 계정으로 남길 수 있다. 이후의 트랜잭션은 무시된다.

## 솔리디티(solidity)

이더리움은 개빈우드에 의하여 창안되었다.  
솔리디티 프로젝트의 주 제품은 솔리디티의 컴파일러 solc이며, 스마트 컨트랙트를 위한 중요한 애플리케이션 바이너리 인터페이스(Application Binary Interface, ABI)표준을 관리한다.  

우선 remix IDE를 통하여 공부를 할것이기 때문에 컴파일러의 설치나 실행 부분은 일단 SKIP. 

## 이더리움 컨트랙트 ABI

컴퓨터 소프트웨어에서 ABI는 두 프로그램 모듈간 또는 운영체제와 사용자 프로그램 간의 인터페이스 이다.
ABI는 데이터 구조와 함수가 어떻게 기계 코드(machine code)에서 사용되는지 방법을 정의한다.

이더리움에서 ABI는 EVM에서 컨트랙트 호출을 인코딩 하고 트랜잭션에서 데이터를 읽는데 사용된다.  
컨트랙트의 ABI는 함수 설명및 이벤트의 JSON 배열로 지정된다.  

ABI도 컴파일러인 solc를 통해서 생성이 가능하다. ABI를 통하여 지갑이나 댑 브라우저 같은 애플리케이션은 올바른 인수와 인수 유형을 사용하여 해당 컨트랙트를 호출하는 트랜잭션을 생성 할 수 있다.  
애플리케이션이 컨트랙트와 상호작용하기 위하여 필요한것은 ABI와 컨트랙트의 주소이다.

To Be..
