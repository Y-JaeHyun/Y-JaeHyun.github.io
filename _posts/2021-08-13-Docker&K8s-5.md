---
layout:     post
author:     bcnote3314
title: Docker & Kubernetes - 5
category: Note
tags: 		Docker&k8s
---

# docker 컨테이너 연결

하나의 서비스를 제공하기 위해서는 어플리케이션 서버, DB 등 다양한 프로그램들의 조합이 필요하다.  

이 프로그램들은 하나의 컨테이너에 모두 설치될 수 있다.  
하지만 docker에서는 일반적으로 각각 별도의 이미지로 관리한다.  
서비스 운영을 위해서는 컨테이너끼리 데이터를 주고받는 일이 가능해야 한다.  

이때 사용하는 옵션이 --link 옵션이다.  
간단한 사용방법은 아래와 같다.

우선 DB 이미지를 컨테이너로 실행시킨다.  
내가 공부하는 환경이 라즈베리파이 이기 때문에 일반적인 mysql이 호환이 잘 안되는거 같아서 rpi-mysql을 이용했다.  

```bash
$ sudo docker run --name db -d hypriot/rpi-mysql
```

여기에 웹서버를 생성하면서 DB 컨테이너와 연결을 하면된다.

```bash
$ sudo docker run --name nginx -d -p 80:80 --link db:db nginx
```

--link 옵션의 뒤 인자는 컨테이너 이름:별칭 형태로 붙게 되며 web 서버에서 접근 가능한 형태의 db 컨테이너가 된다.  

## docker network

도커의 1.9.0 버전부터는 네트워크를 생성할 수 있는 기능이 추가되었다.  

```bash
$ sudo docekr network create [network 명]
$ sudo docker run --name db -d --network [network 명] hypriot/rpi-mysql
$ sudo docker run --name nginx -d -p 80:80 --network [network 명] nginx
```

위의 명령을 통해 --link를 대체할수 있다.  


# 다른 서버의 docker 컨테이터 연결

